"use strict";const t=function(){function t(){this.events={}}return t.prototype.subscribe=function(t,e){return this.events.hasOwnProperty(t)||(this.events[t]=[]),this.events[t].push(e)},t.prototype.publish=function(t,e={}){return this.events.hasOwnProperty(t)?this.events[t].map(t=>t(e)):[]},t}();function e(e){this.debug=!!e.hasOwnProperty("debug")&&e.debug,this.actions=e.hasOwnProperty("actions")?e.actions:{},this.mutations=e.hasOwnProperty("mutations")?e.mutations:{},this.status="...",this.events=new t;const n=this;this.state=new Proxy(e.state||{},{set:function(t,e,s){return t[e]=s,n.debug&&console.log("stateChange",e,": ",s),n.events.publish(`${e}`,n.state),"mutation"!==n.status&&n.debug&&console.warn("Use mutation to set key"),n.status="...",!0}})}e.prototype.dispatch=function(t,e){return"function"!=typeof this.actions[t]?(this.debug&&console.error(`Action ${t} doesnt exist`),!1):(this.debug&&console.groupCollapsed(`ACTION: ${t}`),this.status="action",this.actions[t](this,e),this.debug&&console.groupEnd(),!0)},e.prototype.commit=function(t,e){if("function"!=typeof this.mutations[t])return this.debug&&console.log(`Mutation ${t} doesnt exist`),!1;this.status="mutation";let n=this.mutations[t](this.state,e);return this.state=Object.assign(this.state,n),!0};var n=server="http://localhost:8082/AdminApp";const s={"Ё":"YO","Й":"I","Ц":"TS","У":"U","К":"K","Е":"E","Н":"N","Г":"G","Ш":"SH","Щ":"SCH","З":"Z","Х":"H","Ъ":"'","ё":"yo","й":"i","ц":"ts","у":"u","к":"k","е":"e","н":"n","г":"g","ш":"sh","щ":"sch","з":"z","х":"h","ъ":"'","Ф":"F","Ы":"I","В":"V","А":"a","П":"P","Р":"R","О":"O","Л":"L","Д":"D","Ж":"ZH","Э":"E","ф":"f","ы":"i","в":"v","а":"a","п":"p","р":"r","о":"o","л":"l","д":"d","ж":"zh","э":"e","Я":"Ya","Ч":"CH","С":"S","М":"M","И":"I","Т":"T","Ь":"'","Б":"B","Ю":"YU","я":"ya","ч":"ch","с":"s","м":"m","и":"i","т":"t","ь":"'","б":"b","ю":"yu"," ":"-"},a=function(){function t(){this.xhr=new XMLHttpRequest}function e(t){t&&this.xhr.setRequestHeader("Authorization",`Bearer ${localStorage.getItem("token")}`),this.xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8"),this.xhr.withCredentials=!0}function s(t){return new Promise((function(e){t.addEventListener("load",(function(t){const{status:n,response:s}=t.target;e({status:n,response:s})}))}))}return t.prototype.post=function(t,a,o=!1){return this.xhr.open("POST",n+t,!0),e.call(this,o),this.xhr.send(JSON.stringify(a)),s(this.xhr)},t.prototype.get=function(t,a=!1){return this.xhr.open("GET",n+t,!0),e.call(this,a),this.xhr.send(),s(this.xhr)},t.prototype.delete=function(t,a){return this.xhr.open("DELETE",n+t),e.call(this,!0),this.xhr.send(JSON.stringify(a)),s(this.xhr)},new t}(),o=t=>document.createRange().createContextualFragment(t),i=t=>{const e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(e).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)},l=t=>{window.location.hash=t};var r={loading(t,e){t.loading=e},authorize(t,e){t.isAuth=e.isAuth,t.user=e.jwt},logout(t){t.isAuth=!1,t.user={}},getCategories(t,e){t.categories=e},addCategory(t,e){t.categories=[...t.categories,e]},deleteCategories(t,e){}};const c=new e({debug:!0,actions:{loading(t,e){t.commit("loading",e)},authorize(t,e){t.commit("loading",!0),a.post("/auth/signin",e).then(e=>{200===e.status&&(localStorage.setItem("token",JSON.parse(e.response).token),t.commit("authorize",{isAuth:!0,jwt:i(JSON.parse(e.response).token)}),t.commit("loading",!1),l("/"))})},logout(t){localStorage.clear(),t.commit("logout")},getCategories(t){t.commit("loading",!0),a.get("/categories",!0).then(e=>{200===e.status&&t.commit("getCategories",JSON.parse(e.response)),t.commit("loading",!1)})},addCategory(t,e){t.commit("loading",!0),a.post("/categories",e,!0).then(e=>{200===e.status&&t.commit("addCategory",JSON.parse(e.response)),t.commit("loading",!1)})}},mutations:r,state:{loading:!1,user:{},isAuth:!1,categories:[]}}),d=t=>`\n    <svg class="${t}" version="1.1" id="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n        width="32px" height="32px" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve">\n        <style type="text/css">\n            .st0{fill:none;}\n        </style>\n        <polygon points="17,15 17,8 15,8 15,15 8,15 8,17 15,17 15,24 17,24 17,17 24,17 24,15 "/>\n        <rect class="st0" width="32" height="32"/>\n    </svg>\n`;var h={render:async()=>{return`\n            <div class="wrapper">\n                <div class="passport__block">\n                    <div class="passport__header mb-50">\n                        <p class="tag_p__header">ВАРБ паспорт</p>\n                        <p class="tag_p_about__header">Для использования сервиса необходимо авторизироваться</p>\n                    </div>\n                    \x3c!--<div class="passport__error mb-30">\n                        <p>Такого пользователя не существует</p>\n                    </div>--\x3e\n                    <div class="passport__body">\n                        <form action="">\n                            <div class="form_row mb-30">\n                                <label for="login">Имя пользователя</label>\n                                <input class="mt-8" id="login" name="login" type="text">\n                            </div>\n                            <div class="form_row mb-50">\n                                <label for="password">Пароль</label>\n                                <input class="mt-8" id="password" name="password" type="password">\n                            </div>\n                            <div class="form_row">\n                                <button class="btn login">\n                                    Войти\n                                    ${t="btn_icon",`\n    <svg class="${t}" version="1.1" id="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n            width="32px" height="32px" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve">\n        <style type="text/css">\n            .st0{fill:none;}\n        </style>\n        <rect id="_Transparent_Rectangle_" class="st0" width="32" height="32"/>\n        <polygon points="18,6 16.6,7.4 24.1,15 3,15 3,17 24.1,17 16.6,24.6 18,26 28,16 "/>\n    </svg>`}\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n            <div class="background__color"></div>\n            <div class="background__image"></div>\n            <div class="image_info">\n                <p><span class="info__sign"></span> Фотография взята с сайта mil.by</p>\n            </div>\n        `;var t},after:async()=>{document.querySelector("form").addEventListener("submit",t=>{t.preventDefault(),c.dispatch("authorize",{username:t.target[0].value,password:t.target[1].value})})}},p={render:async()=>{const t=c.state.user.name;return`\n        <div class="dashboard__wrapper">\n            <div class="dash__header">\n                <div class="dash__header_left_side">\n                    <p class="white_p h_logo">\n                        <span class="d-inline-b">\n                            ${e="header_menu_icon",`\n    <svg class="${e}" version="1.1" id="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    width="32px" height="32px" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve">\n        <rect x="4" y="24" width="24" height="2"/>\n        <rect x="4" y="12" width="24" height="2"/>\n        <rect x="4" y="18" width="24" height="2"/>\n        <rect x="4" y="6" width="24" height="2"/>\n    </svg>\n`}\n                            <span class="tooltip shadow">Скрыть/показать меню</span>\n                        </span>\n                        <span class="light_p">ВАРБ</span> \n                        <span class="bold_p">информационная система</span>\n                    </p>\n                </div>\n                <div class="dash__header_right_side">\n                    <p class="white_p">\n                        <span class="light_p">${t||"Noname"}</span>\n                        <span class="bold_p logout_menu_btn pr-25">Выйти ${(t=>`\n    <svg class="${t}" id="icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n        <defs>\n            <style>.cls-1{fill:none;}</style>\n        </defs>\n        <title>logout</title>\n        <path d="M6,30H18a2.0023,2.0023,0,0,0,2-2V25H18v3H6V4H18V7h2V4a2.0023,2.0023,0,0,0-2-2H6A2.0023,2.0023,0,0,0,4,4V28A2.0023,2.0023,0,0,0,6,30Z"/>\n        <polygon points="20.586 20.586 24.172 17 10 17 10 15 24.172 15 20.586 11.414 22 10 28 16 22 22 20.586 20.586"/>\n        <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>\n    </svg>\n`)("logout_icon")}</span>\n                    </p>\n                </div>\n            </div>\n            <div class="dash__main">\n                <div class="dash__left-side">\n                    <ul class="dash_menu">\n                        <li class="dash_menu_item"><a class="pure_a nav_menu_link" href="#/">${(t=>`\n    <svg class="${t}" id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n        <defs>\n            <style>.cls-1{fill:none;}</style>\n        </defs>\n        <title>home</title>\n        <path d="M16.61,2.21a1,1,0,0,0-1.24,0L1,13.42,2.24,15,4,13.62V26a2,2,0,0,0,2,2H26a2,2,0,0,0,2-2V13.63L29.76,15,31,13.43ZM18,26H14V18h4Zm2,0h0V18a2,2,0,0,0-2-2H14a2,2,0,0,0-2,2v8H6V12.06L16,4.27l10,7.8V26Z" transform="translate(0 0)"/>\n        <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>\n    </svg>\n`)("menu_icon")} Главная</a></li>\n                        <li class="dash_menu__delimeter">Структура сайта</li>\n                        <li class="dash_menu_item"><a class="pure_a nav_menu_link" href="#/categories">${(t=>`\n    <svg class="${t}" id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n        <defs>\n            <style>.cls-1{fill:none;}</style>\n        </defs>\n        <title>categories</title>\n        <path d="M6.76,6l.45.89L7.76,8H12v5H4V6H6.76m.62-2H3A1,1,0,0,0,2,5v9a1,1,0,0,0,1,1H13a1,1,0,0,0,1-1V7a1,1,0,0,0-1-1H9L8.28,4.55A1,1,0,0,0,7.38,4Z" transform="translate(0 0)"/>\n        <path d="M22.76,6l.45.89L23.76,8H28v5H20V6h2.76m.62-2H19a1,1,0,0,0-1,1v9a1,1,0,0,0,1,1H29a1,1,0,0,0,1-1V7a1,1,0,0,0-1-1H25l-.72-1.45a1,1,0,0,0-.9-.55Z" transform="translate(0 0)"/>\n        <path d="M6.76,19l.45.89L7.76,21H12v5H4V19H6.76m.62-2H3a1,1,0,0,0-1,1v9a1,1,0,0,0,1,1H13a1,1,0,0,0,1-1V20a1,1,0,0,0-1-1H9l-.72-1.45a1,1,0,0,0-.9-.55Z" transform="translate(0 0)"/>\n        <path d="M22.76,19l.45.89L23.76,21H28v5H20V19h2.76m.62-2H19a1,1,0,0,0-1,1v9a1,1,0,0,0,1,1H29a1,1,0,0,0,1-1V20a1,1,0,0,0-1-1H25l-.72-1.45a1,1,0,0,0-.9-.55Z" transform="translate(0 0)"/>\n        <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>\n    </svg>\n`)("menu_icon")} Категории</a></li>\n                        <li class="dash_menu_item"><a class="pure_a nav_menu_link" href="#/departments">${(t=>`\n    <svg class="${t}" id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n        <defs>\n            <style>.cls-1{fill:none;}</style>\n        </defs>\n        <title>tree-view</title>\n        <path d="M30,20V12H22v3H17V7a2,2,0,0,0-2-2H10V2H2v8h8V7h5V25a2,2,0,0,0,2,2h5v3h8V22H22v3H17V17h5v3ZM8,8H4V4H8ZM24,24h4v4H24Zm0-10h4v4H24Z" transform="translate(0)"/>\n        <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>\n    </svg>\n`)("menu_icon")} Подразделения</a></li>\n                        <li class="dash_menu__delimeter">Наполнение сайта</li>\n                        <li class="dash_menu_item"><a class="pure_a nav_menu_link" href="#/departmentsPage">${(t=>`\n    <svg class="${t}" version="1.1" id="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n    width="32px" height="32px" viewBox="0 0 32 32" style="enable-background:new 0 0 32 32;" xml:space="preserve">\n        <style type="text/css">.st0{fill:none;}</style>\n        <title>document</title>\n        <path d="M25.7,9.3l-7-7C18.5,2.1,18.3,2,18,2H8C6.9,2,6,2.9,6,4v24c0,1.1,0.9,2,2,2h16c1.1,0,2-0.9,2-2V10C26,9.7,25.9,9.5,25.7,9.3\n        z M18,4.4l5.6,5.6H18V4.4z M24,28H8V4h8v6c0,1.1,0.9,2,2,2h6V28z"/>\n        <rect x="10" y="22" width="12" height="2"/>\n        <rect x="10" y="16" width="12" height="2"/>\n        <rect class="st0" width="32" height="32"/>\n    </svg>\n`)("menu_icon")} Страницы подразделений</a></li>\n                        <li class="dash_menu_item">Документы</li>\n                        <li class="dash_menu_item">Учёт и регистрация УМКД</li>\n                        <li class="dash_menu_item">План-календарь</li>\n                        <li class="dash_menu_item">Новости</li>\n                        <li class="dash_menu_item">Анонсы</li>\n                        <li class="dash_menu__delimeter">Администрирование</li>\n                        <li class="dash_menu_item">Пользователи</li>\n                        <li class="dash_menu_item">Настройки</li>\n                    </ul>\n                </div>\n                <home-content class="dash__content"></home-content>\n            </div>\n            <div class="clearfix"></div>\n        </div>`;var e},after:async()=>{document.querySelector(".logout_menu_btn").addEventListener("click",()=>{c.dispatch("logout"),l("/login")}),document.querySelector(".header_menu_icon").addEventListener("click",()=>{let t=document.querySelector(".dash__left-side"),e=document.querySelector(".dash__content");"none"==t.style.display?(t.style.display="block",e.style.width="calc(100% - 290px)",e.style.left="290px"):(t.style.display="none",e.style.width="100%",e.style.left="0")}),window.addEventListener("hashchange",(function(){document.querySelectorAll(".nav_menu_link").forEach(t=>{t.hash===location.hash?t.parentNode.classList.add("nav_menu_link__active"):t.parentNode.classList.remove("nav_menu_link__active")})}))}};const u=function(){function t(t,e,n,s,a=!1){this.name=t,this.icon="function"==typeof e?e("btn_icon"):"",this.action=n,this.style=`btn ${s||""}`,this.disabled=a}return t.prototype.render=function(){const t=document.createElement("button");return t.innerHTML=this.name+this.icon,this.style.split(" ").forEach(e=>" "!==e&&t.classList.add(e)),t.onclick=this.action,t.disabled=this.disabled,t},t}(),_=function(){function t(t,e,n){this.header=t,this.data=e,this.isSelect=n.selectable,this.overflow=n.overflowMenu}function e(t){const e=o(`\n            <div class="overflow_menu__wrapper">\n                <button class="overflow_button">\n                    ${n="btn__overflow_menu_v",`\n    <svg class="${n}" id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n        <defs>\n            <style>.cls-1{fill:none;}</style>\n        </defs>\n        <title>overflow-menu--vertical</title>\n        <circle cx="16" cy="6" r="2"/>\n        <circle cx="16" cy="16" r="2"/>\n        <circle cx="16" cy="26" r="2"/>\n        <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>\n    </svg>\n`}\n                </button>\n                <div class="overflow_menu__popup">\n                    <ul class="overflow_menu__list">\n                    </ul>\n                </div>\n            </div>\n        `);var n;const s=e.querySelector(".overflow_menu__list");return t.forEach(t=>{s.appendChild(function(t){const e=o(`\n                <li class="overflow_menu__item">\n                    <button class="overflow_menu_item__btn">\n                        ${t.name}\n                    </button>\n                </li>\n            `);return e.querySelector(".overflow_menu_item__btn").addEventListener("click",t.fn),e}(t))}),e}return t.prototype.render=function(){document.querySelector("body").addEventListener("click",(function(t){document.querySelectorAll(".overflow_menu__popup").forEach(e=>{let n=e.parentNode.children[0],s=e.parentNode.children[0].children[0],a=t.target===n||t.target===s;e.style.display=a?"block":"none"})}));const t=o(`\n            <div class="table__wrapper shadow">\n                <table class="data_table">\n                    <thead class="data_table__header">\n                        <tr>\n                            ${s=this.header,s.map(t=>`<th class="data_table__th">\n                ${t}\n            </th>`).join("")}\n                        </tr>\n                    </thead>\n                    <tbody>\n                        ${n=this.data,n.map(t=>{return`\n            <tr class="data_table__tr">\n                <td class="data_table__td data_table__select"></td>\n                ${e=t,e.map(t=>`\n            <td class="data_table__td">${t}</td>\n        `).join("")}\n                <td class="data_table__overflow"></td>\n            </tr>`;var e}).join("")}\n                    </tbody>\n                </table>\n            </div>\n        `);var n,s;if(t.querySelectorAll(".data_table__overflow").forEach(t=>{t.appendChild(e(this.overflow))}),this.isSelect){t.querySelectorAll(".data_table__select").forEach(t=>{t.appendChild(function(){const t=o('\n                <label class="select_container">\n                    <input class="checkbox" type="checkbox">\n                    <span class="checkmark"></span>\n                </label>');return t.querySelector(".checkbox").addEventListener("click",(function(t){console.log("CHECKED",this,t)})),t}())})}return t},t}(),m=function(){function t(t){this.funcs=t}return t.prototype.render=function(){const t=document.createElement("div");t.classList.add("table_action");const e=Object.keys(this.funcs);return 0!=e.length&&(e.forEach(e=>{const n=new u(e,this.funcs[e].icon,this.funcs[e].action,this.funcs[e].style,this.funcs[e].disabled).render();t.appendChild(n)}),t.prepend(o(`\n            <div class="datatable_search_block">\n                <span class="datatable_search_icon">\n                    ${n="w1-icon fill-gray",`\n    <svg class="${n}" id="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">\n        <defs>\n            <style>.cls-1{fill:none;}</style>\n        </defs>\n        <title>search</title>\n        <path d="M30,28.59,22.45,21A11,11,0,1,0,21,22.45L28.59,30ZM5,14a9,9,0,1,1,9,9A9,9,0,0,1,5,14Z" transform="translate(0 0)"/>\n        <rect id="_Transparent_Rectangle_" data-name="&lt;Transparent Rectangle&gt;" class="cls-1" width="32" height="32"/>\n    </svg>\n`}\n                </span>\n                <input placeholder="Поиск" class="datatable_search" type="text" />\n            </div>\n        `)),t);var n},t}(),g=function(){function t(t){this.header=t.header||"Not setted header",this.body=t.hasOwnProperty("body")?t.body:void 0,this.buttons=t.buttons,this.fields=t.hasOwnProperty("fields")?t.fields:void 0}function e(t,e,n=null){const s=document.createElement("div");return Array.isArray(e)?e.forEach(t=>s.classList.add(t)):s.classList.add(e),"string"==typeof t?s.innerHTML=t:Array.isArray(t)?t.forEach(t=>s.appendChild(t)):s.appendChild(t),"function"==typeof n&&(s.onclick=n),s}function n(t){const e=o(`\n            <button class="${i[t.type].join(" ")}">\n                ${t.name}\n            </button>\n        `);return e.querySelector("button").addEventListener("click",t.fn),e}const s=["modal_box__header","mb-30"],a=["modal_box__body","mb-50"],i={grayBtn:["btn","modal_box_btn","gray_btn","half-width","float_l"],blueBtn:["btn","modal_box_btn","blue_btn","half-width","float_l"]};return t.prototype.render=function(){const t=document.querySelector("#app"),i={cancel:{name:"Отменить",type:"grayBtn",fn:()=>{t.removeChild(p)}}};let l="",r="",c="",d="";l=e(this.header,s),void 0!==this.body&&(r=e(this.body,a)),void 0!==this.fields&&(c=this.fields.map(t=>function(t){const e=o(`\n            <div class="form_row mb-30">\n                <label for="${t.id}">${t.name}</label>\n                <input class="mt-8" id="${t.id}" name="${t.id}" type="${t.type||"text"}">\n            </div>\n        `),n=e.getElementById(t.id);return t.hasOwnProperty("fn")&&t.fn.forEach(t=>{n.addEventListener(t.eventType,t.fn)}),e}(t)),c=e(c,a)),d=this.buttons.map(t=>t.hasOwnProperty("preset")?n(i[t.preset]):n(t)),footer=e(d,"modal_box__footer");const h=e([l,c,footer],"dash__modal_box"),p=e(h,"dashboard__modal",e=>{"dashboard__modal"===e.target.className&&t.removeChild(p)});t.appendChild(p)},t}();var v={"/":{toLoad:p},"/categories":{toLoad:{fetchData:async()=>{c.dispatch("getCategories")},render:async()=>'\n        <div class="dash__content_header">\n            <div class="dash__content_header_top">\n                <p class="pure white_p dash__content_header_p">Категории</p>\n            </div>\n            <div class="dash__content_header_bottom">\n            </div>\n        </div>\n        <div class="dash__content_body">\n        </div>\n        ',after:async()=>{c.events.subscribe("categories",()=>{!function(){const t=new m({"Добавить категорию":{icon:d,action:()=>{new g({header:"Добавить новую категроию",fields:[{name:"Название категории",id:"category_name",fn:[{eventType:"input",fn:t=>{document.getElementById("category_link").value=t.target.value.split("").map((function(t){return s[t]||t})).join("")}}]},{name:"Ссылка категории",id:"category_link"}],buttons:[{preset:"cancel"},{name:"Сохранить",type:"blueBtn",fn:()=>{const t=document.getElementById("category_name").value,e=document.getElementById("category_link").value;""!==t&&""!==e&&c.dispatch("addCategory",{title:t,link:e,canHaveYMKD:!0})}}]}).render()},style:"float_r"},"Удалить":{icon:"",action:()=>{console.log("Deleted something")},style:"float_r",disabled:!0}}).render(),e={name:"Удалить",fn:function(t){new g("Удалить категорию?","Данное действие навсегда удалит эту категорию").render(),console.log("Deleted from overflow menu",t)}},n={name:"Изменить",fn:function(t){console.log("changed!")}},a=c.state.categories.map(t=>{const e=t.departments?t.departments.length:0;return[t.title,t.link,e]}),i=new _(["","Название","Ссылка","Количество отделений",""],a,{selectable:!0,overflowMenu:[e,n]}).render();((t,e)=>{const n=document.querySelector(`.${t}`);0===n.children.length?e.forEach(t=>n.appendChild(t)):e.forEach((t,e)=>{n.replaceChild(t,n.children[e])})})("dash__content_body",[t,o('<div class="clearfix"></div>'),i])}()})}},parentTemplate:"home",parentRoute:"/"},"/departments":{toLoad:{render:async()=>'\n        <div class="dash__content_header">\n            <div class="dash__content_header_top">\n                <p class="pure white_p dash__content_header_p">Подразделения</p>\n            </div>\n            <div class="dash__content_header_bottom">\n            </div>\n        </div>\n        <div class="dash__content_body">\n        </div>\n        ',after:async()=>{}},parentTemplate:"home",parentRoute:"/"},"/login":{toLoad:h,isProtected:!1},"/404":{toLoad:{render:async()=>"<p>Sorry, but this page is not available</p>",after:async()=>{}}}};const f=async t=>{const e=document.querySelector("#app"),n=(()=>{const t=(location.hash.slice(1)||"/").split("/");return{resource:t[1]||null,id:t[2]||null,verb:t[3]||null}})(),s=(n.resource?"/"+n.resource:"/")+(n.id?"/:id":"")+(n.verb?"/"+n.verb:"");let a=v[s]?v[s]:v["/404"];var o;if((t=>!t.hasOwnProperty("isProtected")||!1!==t.isProtected)(a)&&!1==(o=c.state.isAuth,!(!localStorage.getItem("token")||!o))&&l("/login"),a.toLoad.hasOwnProperty("fetchData")&&await a.toLoad.fetchData(),a.hasOwnProperty("parentTemplate")){let t=document.querySelector(`${a.parentTemplate}-content`);if(null===t){const n=a.parentRoute,s=v[n].toLoad;e.innerHTML=await s.render(),await s.after(),t=document.querySelector(`${a.parentTemplate}-content`)}t.innerHTML=await a.toLoad.render()}else e.innerHTML=await a.toLoad.render();await a.toLoad.after({location:`#${s}`})};window.addEventListener("hashchange",f),window.addEventListener("load",f);
